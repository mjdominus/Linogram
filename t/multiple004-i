
require "point";
require "line";

define polygon[N] closed {
  point v[N];
  line  e[N];
  constraints {
    e[i].start = v[i];
    e[i].end = v[i+1];
  }
}

define regpolygon[N] extends polygon[N] {
  point center;
  number rot;
  number rad;
  constraints {
    v[i] = center + rad * cis(rot + i * 360 / N);
  }        
}

regpolygon[4] diamond(center=(0,0), rot=45, rad=1);
regpolygon[4] square(center=(0,0), rot=0, rad=1);